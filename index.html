<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Peak Education</title>

<link rel="icon" href="logo.png">
<link rel="manifest" href="manifest.json">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  color: white;
  background: linear-gradient(270deg,#0f2027,#203a43,#2c5364);
  background-size: 600% 600%;
  animation: bg 15s ease infinite;
}
@keyframes bg {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.container {
  max-width: 720px;
  margin: 40px auto;
  padding: 30px;
  background: rgba(255,255,255,0.12);
  border-radius: 18px;
  backdrop-filter: blur(18px);
}

.hidden { display:none }

h1,h2 { text-align:center }

.topics {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:12px;
  margin:20px 0;
}
.topic {
  background:rgba(255,255,255,0.2);
  padding:14px;
  border-radius:12px;
  text-align:center;
}

input,button {
  width:100%;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:10px;
  font-size:16px;
}
button {
  background:#007bff;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.symbol {
  position:fixed;
  bottom:-40px;
  font-size:26px;
  opacity:0.3;
  animation: float 20s linear infinite;
}
@keyframes float {
  to { transform: translateY(-120vh); }
}

iframe {
  width:100%;
  height:65vh;
  border-radius:14px;
  border:none;
  margin-top:15px;
}
.note { font-size:13px; opacity:.8; text-align:center }
a { color:white; cursor:pointer }
</style>
</head>

<body>

<div class="container">

<!-- HOME -->
<div id="home">
  <h1>Peak Education</h1>
  <p id="fact"></p>

  <div class="topics">
    <div class="topic">Math</div>
    <div class="topic">Computer Science</div>
    <div class="topic">Physics</div>
    <div class="topic">Chemistry</div>
    <div class="topic">Biology</div>
    <div class="topic">Astronomy</div>
  </div>

  <button id="installBtn" style="display:none">Install App</button>

  <input id="email" placeholder="Enter your email" list="emails">
  <datalist id="emails"></datalist>

  <button onclick="enter()">Continue</button>
  <p class="note" id="msg"></p>
</div>

<!-- TOOL -->
<div id="tool" class="hidden">
  <h2>Educational Link Tool</h2>

  <input id="url" placeholder="Enter website URL">
  <button onclick="openLink()">Open</button>
  <button onclick="copyFormula()">Copy Math Formula</button>

  <div id="appArea" class="hidden">
    <iframe id="frame"></iframe>
    <p class="note" id="frameMsg"></p>
  </div>

  <h3>Quick Links</h3>
  <a onclick="openQuick('https://login.live.com/')">Microsoft Login</a><br>
  <a onclick="openQuick('https://www.xbox.com/en-US/play/launch/fortnite/BT5P2X999VH2/')">
    Math Battle Pass
  </a><br><br>

  <a onclick="copyText('chrome://settings/clearBrowserData')">
    Copy Chrome Clear Data
  </a><br>
  <a onclick="copyText('chrome://serviceworker-internals/')">
    Copy Chrome Service Workers
  </a>
</div>

</div>

<script>
/* Fun fact */
const facts=[
  "π is irrational",
  "0.999… = 1",
  "There are more trees than stars in the Milky Way"
];
fact.textContent="Did you know? "+facts[Math.floor(Math.random()*facts.length)];

/* Floating symbols */
["π","∞","Σ","√","∫"].forEach(()=> {
  const s=document.createElement("div");
  s.className="symbol";
  s.textContent=["π","∞","Σ","√","∫"][Math.floor(Math.random()*5)];
  s.style.left=Math.random()*100+"vw";
  document.body.appendChild(s);
});

/* Email save */
const KEY="emails";
function loadEmails(){
  const a=JSON.parse(localStorage.getItem(KEY)||"[]");
  emails.innerHTML=a.map(e=>`<option value="${e}">`).join("");
}
loadEmails();

function enter(){
  const e=email.value.trim();
  if(!e) return;
  const a=JSON.parse(localStorage.getItem(KEY)||"[]");
  if(!a.includes(e)) localStorage.setItem(KEY,JSON.stringify([...a,e]));
  home.classList.add("hidden");
  tool.classList.remove("hidden");
}

/* Install */
let deferred;
window.addEventListener("beforeinstallprompt",e=>{
  e.preventDefault();
  deferred=e;
  installBtn.style.display="block";
});
installBtn.onclick=()=>deferred.prompt();

/* Detect app */
const isApp=window.matchMedia("(display-mode: standalone)").matches;
if(isApp) appArea.classList.remove("hidden");

/* Open links */
function openLink(){
  let u=url.value.trim();
  if(!u) return;
  if(!u.startsWith("http")) u="https://"+u;
  u+=(u.includes("?")?"&":"?")+"scrlcbp=.";

  if(isApp){
    frame.src=u;
    frame.onerror=()=>frameMsg.textContent="This site cannot be opened in the app.";
  } else {
    window.open(u,"_blank");
  }
}
function openQuick(u){
  openLink(url.value=u);
}

/* Copy helpers */
function copyFormula(){ navigator.clipboard.writeText("?scrlcbp=."); }
function copyText(t){ navigator.clipboard.writeText(t); }

/* Register SW */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
